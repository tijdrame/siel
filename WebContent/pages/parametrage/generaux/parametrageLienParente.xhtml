<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  V 0.1 : Maj : 20/11/2007 -->
<ui:composition
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:rich="http://richfaces.ajax4jsf.org/rich"
	xmlns:a="https://ajax4jsf.dev.java.net/ajax"
	xmlns:s="http://jboss.com/products/seam/taglib"
	template="/template/template.xhtml">
	<!-- Page de parametrage des Vehicules -->
    <ui:define name="title">Application Ch@k@</ui:define>
	<ui:define name="body">
		<!-- Message d'avertissement-->
		<center><h:messages style="color:red;"/></center>
		<a:loadScript src="/js/common.js"/>
		<!-- Panel principal-->
		
		
		<div id="zoneResultat" class="zoneResultat">
			<div class="label2">
				#{msgBundle['menu.lien.label']} 
			</div>
			
			<div class="panel">
				<div class="head" style='padding-top:15px;'>
					<div class="ico" ></div>		
					<div class="left perso" ></div>
					<div class="titre" >
						#{msgBundle['menu.lien.titre']} 
					</div>
					<div class="clear"></div>
				</div>
				
				<div class="content">
				<h:form id="form1">
				<a:outputPanel id="panelIntitules" >
					<rich:dataTable id="ongletModele"  value="#{lienParenteService.listLienParente}" var="lienParente" 
						width="80%" rowClasses="row1,row2">
						<f:facet name="header">
							<rich:columnGroup>
								<rich:column>
									#{msgBundle['menu.general.lib']}
								</rich:column>
								<rich:column>
									#{msgBundle['menu.general.liC']}
								</rich:column>
								<rich:column>
									#{msgBundle['menu.lien.TSRP']}
								</rich:column>
								<rich:column>
									#{msgBundle['menu.lien.TORP']}
								</rich:column>
								<rich:column>
									#{msgBundle['menu.lien.TSP']}
								</rich:column>
								<rich:column>
									#{msgBundle['menu.lien.TOP']}
								</rich:column>
								<rich:column>
									#{msgBundle['menu.general.comment']}
								</rich:column>
								<rich:column width="100px;" >
									Action
								</rich:column>
							</rich:columnGroup>
						</f:facet>
						<rich:column>
							<f:facet name="header">
								<h:panelGroup>
									<h:inputText id="libelle" value="#{lienParenteService.lienParenteEnCreation.libelle}" required="true" 
										styleClass="textBleu2" maxlength="80"  requiredMessage="#{msgBundle['menu.general.messageRequ']}"/>
									<h:outputText  style="color:red;font-size: large;font-weight: bold;" value=" *" />
									<h:message for="libelle" style="color:red"/>
								</h:panelGroup>
							</f:facet>
							#{lienParente.libelle}
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:panelGroup>
									<h:inputText id="libellecourt" value="#{lienParenteService.lienParenteEnCreation.libelle_court}" 
										styleClass="textBleu2" maxlength="20" />
									<h:outputText  style="color:red;font-size: large;font-weight: bold;" />
									<h:message for="libellecourt" style="color:red"/>
								</h:panelGroup>
							</f:facet>
							#{lienParente.libelle_court}
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:panelGroup>
									<h:inputText id="tauxSurProf" value="#{lienParenteService.lienParenteEnCreation.tauxSurProf}"  
										styleClass="textBleu2" maxlength="20" required="true" requiredMessage="#{msgBundle['menu.general.messageRequ']}" />
									<h:outputText  style="color:red;font-size: large;font-weight: bold;" value=" *" />
									<h:message for="tauxSurProf" style="color:red"/>
								</h:panelGroup>
							</f:facet>
							#{lienParente.tauxSurProf}
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:panelGroup>
									<h:inputText id="tauxOrphProf" value="#{lienParenteService.lienParenteEnCreation.tauxOrphProf}"  
										styleClass="textBleu2" maxlength="20" required="true" requiredMessage="#{msgBundle['menu.general.messageRequ']}" />
									<h:outputText  style="color:red;font-size: large;font-weight: bold;" value=" *" />
									<h:message for="tauxOrphProf" style="color:red"/>
								</h:panelGroup>
							</f:facet>
							#{lienParente.tauxOrphProf}
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:panelGroup>
									<h:inputText id="tauxSurPens" value="#{lienParenteService.lienParenteEnCreation.tauxSurPens}"  
										styleClass="textBleu2" maxlength="20" required="true" requiredMessage="#{msgBundle['menu.general.messageRequ']}"/>
									<h:outputText  style="color:red;font-size: large;font-weight: bold;" value="*" />
									<h:message for="tauxSurPens" style="color:red"/>
								</h:panelGroup>
							</f:facet>
							#{lienParente.tauxSurPens}
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:panelGroup>
									<h:inputText id="tauxOrphPens" value="#{lienParenteService.lienParenteEnCreation.tauxOrphPens}"  
										styleClass="textBleu2" maxlength="20" required="true" requiredMessage="#{msgBundle['menu.general.messageRequ']}"/>
									<h:outputText  style="color:red;font-size: large;font-weight: bold;"  value=" *" />
									<h:message for="tauxOrphPens" style="color:red"/>
								</h:panelGroup>
							</f:facet>
							#{lienParente.tauxOrphPens}
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<h:panelGroup>
									<h:inputText id="coment" value="#{lienParenteService.lienParenteEnCreation.commentaire}"  
										styleClass="textBleu2" maxlength="30" required="false"/>
									<h:outputText  style="color:red;font-size: large;font-weight: bold;" />
									<h:message for="coment" style="color:red"/>
								</h:panelGroup>
							</f:facet>
							#{lienParente.commentaire}
						</rich:column>
						<rich:column>
							<f:facet name="header">
								<a:commandButton  image="/picto/accept.png" style="height:16px;width:16px;border:0px;" 
									reRender="panelIntitules" status="waitStatus" styleClass="sansOmbre"
									action="#{lienParenteService.ajouterLienParente()}"/>
							</f:facet>
							<table width="100%">
								<tr>
									<td align="center" width="50%" >
										<a:commandButton immediate="true" style="height:16px;width:16px;border:0px;"
											 onclick="if (!confirm('#{msgBundle['menu.lien.messMod']} ?')) return false" 
											action="#{lienParenteService.consulterLienParente(lienParente)}" title="#{msgBundle['menu.general.modf']}"
											reRender="ModificationForfait" image="/picto/page_edit.png" 
											status="waitStatus"  styleClass="sansOmbre"
											oncomplete="javascript:Richfaces.showModalPanel('panelModifierForfait',{width:750, top:50, height:300})">
										</a:commandButton>
									</td>
									<td align="center">
										<a:commandButton immediate="true" style="height:16px;width:16px;border:0px;" reRender="panelIntitules"
											onclick="if (!confirm('#{msgBundle['menu.lien.messSup']} ? ')) return false" 
											image="/picto/cross.png" styleClass="sansOmbre"
											action="#{lienParenteService.supprimerLienParente(lienParente)}"  status="waitStatus" />
									</td>
								</tr>
							</table>
						</rich:column>
					</rich:dataTable>
					</a:outputPanel>
				</h:form>
			</div>
		</div>
	</div>													
						
		<rich:modalPanel id="panelModifierForfait" style="background:url('../img2/fond.jpg') repeat-x scroll 0 0 #FFF;height:590;" >
			<div class="cadreBordOrange margTop10px padLeft30px padRight30px"  style="overflow: none" >
			<div class="zoneTitreOrange margTop10px padLeft10px">
				#{msgBundle['menu.lien.labelModif']} 
			</div>
			<div class="margtop10px">
			<f:facet name="controls">
				<a onclick="Richfaces.hideModalPanel('panelModifierForfait');" style="cursor:pointer" href="#">#{msgBundle['menu.general.fermer']}</a>
			</f:facet>


			<div ><!-- Holds the form -->
			
			<h:form class="note-form" id="ModificationForfait">
			<a:outputPanel ajaxRendered="true">
				<div style="visibility: hidden; display: none" >
					<h:messages id="error"></h:messages>
				</div>
			</a:outputPanel>
			<script>
				jQuery(document).ready(function()
				{
					dateEtHeureInputs();
				});

				function ajaxRequestContainsErrors() {
					var retour = jQuery("#ModificationForfait\\:error").text();
					 if (retour == 'X')
						    return true;
					 if (retour == 'XX')
						    return true;
					 if (retour == 'XXX')
						    return true;
					 return false;
				}

				function fermerSiOk()
				{
					if (!ajaxRequestContainsErrors()) Richfaces.hideModalPanel('panelModifierForfait');
				}

				
				
			</script>
			<table border="0" width="100%">
				<tr>
					<td>
						<h:outputLabel value="#{msgBundle['menu.general.lib']} : " for="libModifForfait" />  
					</td>
					<td >
						<h:inputText styleClass="textBleu margBot10px"  id="libModifForfait" 
							value="#{lienParenteService.lienParenteEnModification.libelle}"  maxlength="80"
							 required="true" requiredMessage="#{msgBundle['menu.general.messageRequ']}"/>
						<h:outputText  style="color:red;font-size: large;font-weight: bold;" value=" *" />
						<h:message for="libModifForfait" style="color:red" />
					</td>
					<td>
						<h:outputLabel value="#{msgBundle['menu.general.liC']} : " for="libModifForfait2" />  
					</td>
					<td >
						<h:inputText styleClass="textBleu margBot10px"  id="libModifForfait2" 
							value="#{lienParenteService.lienParenteEnModification.libelle_court}"  maxlength="30"
							  />
						<h:outputText  style="color:red;font-size: large;font-weight: bold;" />
						<h:message for="libModifForfait2" style="color:red" />
					</td>
				</tr>
				<tr>
					<td>
						<h:outputLabel value="#{msgBundle['menu.lien.TSRP']} : " for="libModifForfait3" />  
					</td>
					<td  >
						<h:inputText styleClass="textBleu margBot10px"  id="libModifForfait3" 
							value="#{lienParenteService.lienParenteEnModification.tauxSurProf}"  maxlength="30"
							required="true" requiredMessage="#{msgBundle['menu.general.messageRequ']}" />
						<h:outputText  style="color:red;font-size: large;font-weight: bold;" value=" *" />
						<h:message for="libModifForfait3" style="color:red" />
					</td>
					<td>
						<h:outputLabel value="#{msgBundle['menu.lien.TORP']}  : " for="libModifForfait4" />  
					</td>
					<td >
						<h:inputText styleClass="textBleu margBot10px"  id="libModifForfait4" 
							value="#{lienParenteService.lienParenteEnModification.tauxOrphProf}"  maxlength="30"
							 required="true" requiredMessage="#{msgBundle['menu.general.messageRequ']}"/>
						<h:outputText  style="color:red;font-size: large;font-weight: bold;" value=" *" />
						<h:message for="libModifForfait4" style="color:red" />
					</td>
				</tr>
				<tr>
				    <td>
						<h:outputLabel value="#{msgBundle['menu.lien.TSP']}  : " for="libModifForfait6" />  
					</td>
					<td  >
						<h:inputText styleClass="textBleu margBot10px"  id="libModifForfait6" 
							value="#{lienParenteService.lienParenteEnModification.tauxSurPens}"  maxlength="30"
							 required="true" requiredMessage="#{msgBundle['menu.general.messageRequ']}" />
						<h:outputText  style="color:red;font-size: large;font-weight: bold;" value=" *" />
						<h:message for="libModifForfait6" style="color:red" />
					</td>
					<td>
						<h:outputLabel value="#{msgBundle['menu.lien.TOP']}  : " for="libModifForfait7" />  
					</td>
					<td>
						<h:inputText styleClass="textBleu margBot10px"  id="libModifForfait7" 
							value="#{lienParenteService.lienParenteEnModification.tauxOrphPens}"  maxlength="30"
						 required="true" requiredMessage="#{msgBundle['menu.general.messageRequ']}" />
						<h:outputText  style="color:red;font-size: large;font-weight: bold;" value=" *"  />
						<h:message for="libModifForfait7" style="color:red" />
					</td>
				</tr>
				<tr>
					<td>
						<h:outputLabel value="#{msgBundle['menu.general.comment']}  : " for="libModifForfait1" />  
					</td>
					<td colspan="4" >
						<h:inputText styleClass="textBleu margBot10px"  id="libModifForfait1" 
							value="#{lienParenteService.lienParenteEnModification.commentaire}" 
							maxlength="20" />
						<h:outputText  style="color:red;font-size: large;font-weight: bold;" />
						<h:message for="libModifForfait1" style="color:red" />
					</td>
				</tr>
				
				<tr>
					<td colspan="5" align="center">
						<br />
						<hr class="orange"/>
						<a:commandButton value="#{msgBundle['menu.siege.messMod']} "  oncomplete="fermerSiOk();" style="text-align:right;" status="waitStatus" 
							action="#{lienParenteService.modifierLienParente(lienParenteService.lienParenteEnModification)}" 
							reRender="ModificationForfait,panelIntitules" image="/img2/bouton_valider.jpg"/> 
					</td>
				</tr>
				
			</table>
			</h:form>
			</div>
		</div>
		<div class="clear"></div>
		</div>
		</rich:modalPanel>				
						
						
		
		        

		
		
	</ui:define>
</ui:composition>